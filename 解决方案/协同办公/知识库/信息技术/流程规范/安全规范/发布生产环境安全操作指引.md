# 发布生产环境安全操作指引

## 背景
空白

## 生产环境安全保护对象

>注：测试环境不受影响

生产环境安全保护的对象有：

1. 服务器
    - 账号登录
    - 数据操作
2. 数据库
    - 账号登录
    - 数据操作
3. 客户数据或配置 （暂不在本文讨论范围内）
4. 其他未列出的

## 生产环境安全保护措施

1. 每次发布或者更新，除非特殊原因，需要对服务器进行快照、备份，以便快速回滚和恢复；

2. 管理员为每一个使用生产环境服务器、数据库的员工创建单独的账号和密码（以下称之为“员工账号”），已有的账号不受影响，密码不会修改；

3. 每个人使用自己单独的账号和密码，账号和密码只能自己使用，不可转借他人或者代替他人操作；

4. 收回账号由管理员专人统一管理，具体操作为：
     - 将员工账号禁用（锁定），密码保持不变，待需要时再启用，使用后再禁用；
     - 员工使用自己的账号之前需要经过审批（审批流程见下文）；
     - 账号权限：
        - 默认情况下：Windows用户具有Administrators即管理员权限，Linux用户仅有普通用户权限
        - 如果需要高权限操作需要通知管理员由管理员进行操作或者授权
        - 数据库用户权限，当前默认为可读可写
5. 在使用账号操作数据时应该遵循操作规范，仅操作被许可的操作，注意保护用户数据，重要操作需要备份；
6. 使用完账号前，需要认真核对自己的操作是否已经确认完成，相关功能是否正常可用，确认没有问题后再注销登录并主动通知管理员禁用账号；
7. 超出账号使用期限的需要告知管理员，以免账号被锁定；
8. **为客户发布更改的注意事项**：
    - 发布更改有两种情况，1.客户主动要求 2.bug修复类或迭代升级
    - 客户主动要求的修改一般不需要经过客户同意
    - 其他情况的发布更改必须经过客户同意，未经客户同意（不要求客户出具官方书面同意书等，但最好有电话、微信等沟通记录），不能发布更改

## 生产环境操作申请审批方法

审批通过飞书“审批”功能进行，建议使用PC端飞书进行操作。
审批功能所在位置：打开飞书-->工作台-->审批-->发起申请-->运维管理-->发布生产申请。按照审批提示操作即可。

服务器列表可以填写服务器的完整IP地址、数据库的IP地址或连接名、数据库名称。以便管理员确定是哪一个对象要开通访问权限。

管理员操作完成后通过飞书告知申请人可以开始使用，申请人使用完后通过飞书告知管理员。中间过程有问题随时沟通。

## 关于申请和操作效率
通过申请的方式以及账号的禁用启用等需要时间，影响效率是必然存在的。

申请发出后，相关人员收到申请后需立刻进行处理，来不及处理的需要尽快处理；

如果长期未通过审批，申请人可以直接与审批人联系；

当管理员因某种原因无法进行授权等操作时，请联系第二管理员；

因为某些操作必须通过PC和网络进行，因此建议在工作时间进行生产操作；

## 生产环境账号管理员联系信息
管理员： xxx  电话号码：xxx

第二管理员：xxx  电话号码：xxx

--end--